{% if post.image %}
  <a class="post-thumbnail" href="{{post.url | prepend: site.baseurl}}">
    <img src="{{post.image}}" alt="{{post.title}}" loading="lazy">
  </a>
{% else %}
  <!-- Try to extract first image from post content -->
  {% assign first_image = post.content | split: '![' | last | split: '](' | last | split: ')' | first %}
  {% if first_image contains '/wp-content/uploads/' %}
  <a class="post-thumbnail" href="{{post.url | prepend: site.baseurl}}">
    <img src="{{first_image}}" alt="{{post.title}}" loading="lazy">
  </a>
  {% else %}
  {% endif %}
{% endif %} 